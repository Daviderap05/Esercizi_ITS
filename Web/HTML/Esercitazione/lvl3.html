<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <p id="title"></p>
    <p id="body"></p>

    <br />

    <ul id="lista"></ul>
    <script>
      //ESERCIZIO1
      const oggetto = {
        nome: "Davide",
        cognome: "Raponi",
      };

      let array = Object.values(oggetto);
      console.log(array);

      //funziona anche così, meglio però a quel punto un forEach
      let array2 = [];
      array.map((e, i) => {
        array2.push(`${e}`);
      });

      console.log(array2);

      //per chat anche se solo Object.values(oggetto) è lo stesso
      console.log(Object.values(oggetto).map((e) => `${e}`));

      //ESERCIZIO2
      const lista = [
        {
          categoria: true,
          prezzo: true,
        },
        {
          categoria: true,
          prezzo: false,
        },
        {
          categoria: false,
          prezzo: true,
        },
      ];

      const info = lista.filter((i) => i.categoria && i.prezzo);
      console.log(info);

      //ESERCIZIO3 -> reduce prende un totale che sarà 0 e inizia a sommarlo a tutti i numiri della lista
      const lista3 = [20, -20, 20];
      console.log(lista3.reduce((total, amount) => total + amount, 0)); // , 0 serve a inizializzare 0 (di default 0)

      //ESERCIZIO4
      const lista4 = [
        {
          voto1: 10,
          voto2: 7,
        },
        {
          voto1: 6,
          voto2: 9,
        },
        {
          voto1: 8,
          voto2: 5,
        },
      ];

      const media_singoli = lista4.map((studente) => {
        let voti = Object.values(studente);
        let sum = voti.reduce((sum, voto) => sum + voto);
        return sum / voti.length;
      });

      console.log(media_singoli);
      console.log(
        media_singoli.reduce((sum, voto) => sum + voto) / media_singoli.length
      );

      //ESERCIZIO6/5
      async function fetchDati() {
        try {
          let response = await fetch(
            "https://jsonplaceholder.typicode.com/posts/1"
          );
          if (!response.ok) {
            throw new Error("Errore HTTP! Status: " + response.status);
          }
          let data = await response.json();
          const { title, body } = data;
          document.getElementById("title").innerHTML = title;
          document.getElementById("body").innerHTML = body;
        } catch (error) {
          console.error("Errore nella richiesta: ", error);
        }
      }
      fetchDati();

      fetch("https://jsonplaceholder.typicode.com/posts/1")
        .then((response) => response.json())
        .then((data) => console.log(data))
        .catch((error) => console.error("Errore nella richiesta:", error));

      //ESERCIZIO7
      async function fetchDati2() {
        try {
          const response = await fetch(
            "https://jsonplaceholder.typicode.com/users"
          );
          if (!response.ok) {
            throw new Error("Errore HTTP! Status: " + response.status);
          }

          const data = await response.json();

          const nomi = data.map((u) => u.name);

          nomi.sort((a, b) => a.localeCompare(b));

          const ul = document.getElementById("lista");

          nomi.forEach((nome) => {
            const li = document.createElement("li");
            li.textContent = nome;
            ul.appendChild(li);
          });
        } catch (error) {
          console.error("Errore nella richiesta:", error);
        }
      }
      fetchDati2();
    </script>
  </body>
</html>
